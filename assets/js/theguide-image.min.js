angular.module("tgImage",["tgUtils"]),function(){angular.module("tgImage").directive("tgImage",["tgImageService","tgUtils","$window",function(a,b,c){return{restrict:"E",scope:!0,transclude:!0,link:{post:function(d,e,f){function g(){j()}function h(){a.isInsideViewport(e,i.lazyLoadingPreloadThreshold)&&(d.$evalAsync(function(){d.inViewport=!0}),angular.element(c).off("scroll resize",g))}var i={lazyLoadingPreloadThreshold:200};d.inViewport=!1,d.imageSrc=f.imageSrc,d.imageAlt=f.imageAlt,d.imageClasses=f.imageClasses,d["static"]=d.$eval(f["static"]),d.imageWidth=f.imageWidth,d.imageHeight=f.imageHeight,angular.element(c).on("scroll resize",g),d.$on("placeholder.rendered",function(a){a.stopPropagation(),h()});var j=b.throttle(h)}},template:'<tg-placeholder ng-if="!imageLoaded" placeholder-width="{{imageWidth}}" placeholder-height="{{imageHeight}}" static="{{static}}" placeholder-alt="{{imageAlt}}"></tg-placeholder><img tg-image-ready ng-show="imageLoaded" class="{{static ? \'\' : \'img-responsive\'}} {{imageClasses}}" alt="{{imageAlt}}">'}}]),angular.module("tgImage").directive("tgPlaceholder",["tgImageService","$timeout",function(a,b){return{restrict:"E",template:'<div class="h-bg-c" ng-class="{\'position position-content-center position-content-middle position-xxxl\' : hasPlaceholder}" ng-style="placeHolderWidth"><div ng-if="hasPlaceholder" class="position-component position-component-center position-component-middle"><span class="icon icon-loading-image-placeholder icon-gray-dark aria-hidden="true""></span></div><div ng-style="placeHolderHeight"></div></div>',link:function(a,c,d){var e={minHeight:130},f=d.placeholderHeight;a.width=d.placeholderWidth,a["static"]=a.$eval(d["static"]),a.imageAlt=d.placeholderAlt,a.hasPlaceholder=a.width>e.minHeight||f>e.minHeight,a.placeHolderHeight={"padding-top":f/a.width*100+"%",width:"100%"},a.placeHolderWidth={position:"relative",width:a["static"]?a.width+"px":"100%"},b(function(){a.$emit("placeholder.rendered")})}}}]),angular.module("tgImage").directive("tgImageReady",[function(){return{replace:!1,scope:!1,link:function(a,b){function c(){a.$evalAsync(function(){a.imageLoaded=!0}),b.off("load")}a.imageLoaded=!1,b.on("load",function(){c()});var d=a.$watch("inViewport",function(e){e&&(b.attr("src",a.imageSrc),(b[0].complete||b[0].clientWidth>0||b[0].clientHeight>0)&&c(),d())})}}}])}(),function(){angular.module("tgImage").service("tgImageService",[function(){function a(){return document.documentElement.clientHeight}function b(b,c){return c=c||0,b=b[0]||b,b.getBoundingClientRect().top<a()+c}this.isInsideViewport=b}])}();